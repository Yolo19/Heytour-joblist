{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/yulu/Heytour-joblist/src/authentication/Auth.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useReducer } from \"react\";\nimport { Button, Divider, Form, Modal, Message } from 'semantic-ui-react';\nimport { useLogin } from './AuthAPI';\nimport authReducer from './AuthReducer';\nexport default function Auth(props) {\n  _s();\n\n  const didMountRef = useRef(false);\n  const [login, setLogin] = useLogin(null);\n  const [state, dispatch] = useReducer(authReducer, {\n    userName: '',\n    password: '',\n    isError: false,\n    isLoading: false,\n    validation: {}\n  });\n  useEffect(() => {\n    if (didMountRef.current) {\n      if (login.isError) {\n        dispatch({\n          type: 'AUTH_ERROR'\n        });\n      } else if (login.isLoading) {\n        dispatch({\n          type: 'AUTH_LOADING'\n        });\n      } else {\n        props.onLogin(login.data);\n      }\n    } else {\n      didMountRef.current = true;\n    }\n\n    ;\n  }, [login]);\n\n  function handleLogin() {\n    const user = {\n      userName: state.userName,\n      password: state.password\n    };\n    setLogin(user);\n  }\n\n  function handleChange(e, {\n    name,\n    value\n  }) {\n    dispatch({\n      type: 'AUTH_TYPING',\n      payload: {\n        name: name,\n        value: value\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    onClose: props.onClose,\n    open: props.open,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Content, {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleLogin,\n        loading: state.isLoading,\n        error: state.isError,\n        children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n          required: true,\n          name: \"userName\",\n          label: \"User Name\",\n          value: state.userName,\n          placeholder: \"User Name\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n          required: true,\n          name: \"password\",\n          label: \"Password\",\n          value: state.password,\n          placeholder: \"Password\",\n          type: \"password\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: props.onClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), state.isError && /*#__PURE__*/_jsxDEV(Message, {\n          error: true,\n          header: \"Login Failed\",\n          content: \"Please check your username and password.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Auth, \"ybNdf865RcR+mEFoy0vZ5GRko1o=\", false, function () {\n  return [useLogin];\n});\n\n_c = Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/yulu/Heytour-joblist/src/authentication/Auth.js"],"names":["React","useState","useEffect","useRef","useReducer","Button","Divider","Form","Modal","Message","useLogin","authReducer","Auth","props","didMountRef","login","setLogin","state","dispatch","userName","password","isError","isLoading","validation","current","type","onLogin","data","handleLogin","user","handleChange","e","name","value","payload","onClose","open"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useReducer } from \"react\";\nimport { Button, Divider, Form, Modal, Message } from 'semantic-ui-react'\nimport { useLogin } from './AuthAPI'\nimport authReducer from './AuthReducer'\n\nexport default function Auth(props){\n    const didMountRef = useRef(false);\n\n    const [login, setLogin] = useLogin(null);\n    const [state, dispatch] = useReducer(authReducer, {\n        userName: '',\n        password: '',\n        isError: false,\n        isLoading: false,\n        validation: {}\n    });\n\n    useEffect(() => {\n        if (didMountRef.current) {\n          if (login.isError) {\n            dispatch({type:'AUTH_ERROR'});\n          } else if (login.isLoading) {\n            dispatch({type:'AUTH_LOADING'});\n          } else {\n            props.onLogin(login.data);\n          }\n        } else {\n          didMountRef.current = true;\n        };\n      }, [login]);\n\n    function handleLogin() {\n        const user = {\n            userName: state.userName,\n            password: state.password\n        };\n\n        setLogin(user);\n    }\n    \n    function handleChange (e, { name, value }) {\n        dispatch({type: 'AUTH_TYPING', payload: {name: name, value: value}})\n    }\n\n    return (\n        <Modal\n            onClose={props.onClose}\n            open={props.open}\n        >\n       <Modal.Header>Login</Modal.Header>\n\n       <Modal.Content>\n       <Form onSubmit={handleLogin} loading={state.isLoading} error={state.isError}>\n          <Form.Input required name='userName' label='User Name' value={state.userName} placeholder='User Name' onChange={handleChange} />\n          <Form.Input required name='password' label='Password'  value={state.password} placeholder='Password' type='password' onChange={handleChange} />\n          <Button onClick={props.onClose}>Close</Button>\n          <Button type='submit'>Login</Button>\n          {state.isError && \n            <Message\n              error\n              header='Login Failed'\n              content='Please check your username and password.'\n            />\n          }     \n        </Form>\n       </Modal.Content>\n    </Modal>\n        \n    )\n}"]},"metadata":{},"sourceType":"module"}